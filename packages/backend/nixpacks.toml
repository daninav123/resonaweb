[phases.setup]
nixPkgs = ['nodejs_18']
aptPkgs = []

[phases.install]
cmds = [
  'npm ci --omit=dev',
  'npx prisma generate'
]

[phases.build]
cmds = ['tsc --project tsconfig.railway.json || npm run build']

[start]
cmd = 'npx prisma migrate deploy && node dist/index.js'
