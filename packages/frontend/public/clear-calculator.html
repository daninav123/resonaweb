<!DOCTYPE html>
<html>
<head>
    <title>Limpiar Calculadora</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .card {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        button {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px 5px;
        }
        button:hover {
            background: #c0392b;
        }
        .success {
            background: #27ae60;
        }
        .success:hover {
            background: #229954;
        }
        pre {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            overflow: auto;
            max-height: 400px;
        }
        .info {
            background: #3498db;
            color: white;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="card">
        <h1>üîß Reparar Calculadora</h1>
        
        <div class="info">
            <strong>Este script limpiar√° el localStorage y verificar√° la configuraci√≥n.</strong>
        </div>

        <button onclick="verActual()">üìä Ver Configuraci√≥n Actual</button>
        <button onclick="limpiar()" class="success">üßπ Limpiar y Resetear</button>
        <button onclick="location.href='/admin/calculator'">‚Ü©Ô∏è Volver al Gestor</button>

        <div id="output"></div>
    </div>

    <script>
        function verActual() {
            const saved = localStorage.getItem('advancedCalculatorConfig');
            const output = document.getElementById('output');
            
            if (!saved) {
                output.innerHTML = '<div class="info">‚ùå No hay configuraci√≥n guardada</div>';
                return;
            }

            try {
                const config = JSON.parse(saved);
                let html = '<h3>Configuraci√≥n Actual:</h3>';
                html += '<pre>' + JSON.stringify(config, null, 2) + '</pre>';
                
                html += '<h3>Resumen:</h3><ul>';
                html += `<li>Total tipos: ${config.eventTypes.length}</li>`;
                config.eventTypes.forEach((e, i) => {
                    html += `<li>${i + 1}. ${e.icon} ${e.name} - ${e.parts ? e.parts.length : 0} partes</li>`;
                });
                html += '</ul>';
                
                output.innerHTML = html;
            } catch (e) {
                output.innerHTML = '<div class="info">‚ùå Error al parsear: ' + e.message + '</div>';
            }
        }

        function limpiar() {
            const output = document.getElementById('output');
            
            // Limpiar
            localStorage.removeItem('advancedCalculatorConfig');
            localStorage.removeItem('calculatorConfig');
            
            // Configuraci√≥n por defecto
            const defaultConfig = {
                eventTypes: [
                    {
                        id: 'boda',
                        name: 'Boda',
                        icon: 'üíí',
                        multiplier: 1.5,
                        parts: [
                            { id: 'ceremony', name: 'Ceremonia', icon: 'üíí', description: 'Ceremonia religiosa o civil', defaultDuration: 1, soundLevel: 'professional', lightingLevel: 'basic' },
                            { id: 'cocktail', name: 'C√≥ctel', icon: 'üç∏', description: 'Aperitivo y bebidas', defaultDuration: 2, soundLevel: 'intermediate', lightingLevel: 'intermediate' },
                            { id: 'banquet', name: 'Banquete', icon: 'üçΩÔ∏è', description: 'Comida principal', defaultDuration: 4, soundLevel: 'professional', lightingLevel: 'professional' },
                            { id: 'disco', name: 'Disco', icon: 'üéµ', description: 'M√∫sica y baile', defaultDuration: 4, soundLevel: 'premium', lightingLevel: 'premium' }
                        ]
                    },
                    {
                        id: 'conferencia',
                        name: 'Conferencia',
                        icon: 'üé§',
                        multiplier: 1.2,
                        parts: [
                            { id: 'registration', name: 'Registro', icon: 'üìã', description: 'Acreditaci√≥n', defaultDuration: 1, soundLevel: 'none', lightingLevel: 'basic' },
                            { id: 'presentations', name: 'Ponencias', icon: 'üé§', description: 'Charlas', defaultDuration: 4, soundLevel: 'professional', lightingLevel: 'professional' },
                            { id: 'coffee-break', name: 'Coffee Break', icon: '‚òï', description: 'Descanso', defaultDuration: 0.5, soundLevel: 'basic', lightingLevel: 'basic' }
                        ]
                    },
                    {
                        id: 'concierto',
                        name: 'Concierto',
                        icon: 'üéµ',
                        multiplier: 1.8,
                        parts: [
                            { id: 'soundcheck', name: 'Prueba de Sonido', icon: 'üîß', description: 'Preparaci√≥n t√©cnica', defaultDuration: 2, soundLevel: 'premium', lightingLevel: 'professional' },
                            { id: 'concert', name: 'Concierto', icon: 'üéµ', description: 'Actuaci√≥n principal', defaultDuration: 3, soundLevel: 'premium', lightingLevel: 'premium' }
                        ]
                    },
                    {
                        id: 'corporativo',
                        name: 'Evento Corporativo',
                        icon: 'üíº',
                        multiplier: 1.3,
                        parts: [
                            { id: 'welcome', name: 'Bienvenida', icon: 'üëã', description: 'Recepci√≥n', defaultDuration: 0.5, soundLevel: 'basic', lightingLevel: 'intermediate' },
                            { id: 'presentation', name: 'Presentaci√≥n', icon: 'üìä', description: 'Presentaci√≥n corporativa', defaultDuration: 2, soundLevel: 'professional', lightingLevel: 'professional' },
                            { id: 'teambuilding', name: 'Team Building', icon: 'ü§ù', description: 'Actividades', defaultDuration: 3, soundLevel: 'intermediate', lightingLevel: 'intermediate' }
                        ]
                    },
                    {
                        id: 'fiesta',
                        name: 'Fiesta Privada',
                        icon: 'üéâ',
                        multiplier: 1.0,
                        parts: [
                            { id: 'setup', name: 'Montaje', icon: 'üîß', description: 'Preparaci√≥n', defaultDuration: 1, soundLevel: 'intermediate', lightingLevel: 'intermediate' },
                            { id: 'party', name: 'Fiesta', icon: 'üéâ', description: 'Celebraci√≥n', defaultDuration: 5, soundLevel: 'professional', lightingLevel: 'professional' }
                        ]
                    },
                    {
                        id: 'otro',
                        name: 'Otro',
                        icon: 'üìÖ',
                        multiplier: 1.0,
                        parts: [
                            { id: 'event', name: 'Evento', icon: 'üìÖ', description: 'Evento general', defaultDuration: 4, soundLevel: 'intermediate', lightingLevel: 'intermediate' }
                        ]
                    }
                ],
                servicePrices: {
                    sound: { basic: 100, intermediate: 200, professional: 350, premium: 600 },
                    lighting: { basic: 80, intermediate: 150, professional: 280, premium: 500 }
                }
            };

            // Guardar
            localStorage.setItem('advancedCalculatorConfig', JSON.stringify(defaultConfig));
            
            let html = '<div style="background: #27ae60; color: white; padding: 20px; border-radius: 5px; margin: 20px 0;">';
            html += '<h3>‚úÖ ¬°Limpieza Completa!</h3>';
            html += '<p>Se ha guardado la configuraci√≥n por defecto con:</p>';
            html += '<ul>';
            html += '<li>6 tipos de eventos</li>';
            defaultConfig.eventTypes.forEach(e => {
                html += `<li>${e.icon} ${e.name}: ${e.parts.length} partes</li>`;
            });
            html += '</ul>';
            html += '<p><strong>Ahora recarga la p√°gina del gestor:</strong></p>';
            html += '<button onclick="location.href=\'/admin/calculator\'">‚Ü©Ô∏è Ir al Gestor</button>';
            html += '</div>';
            
            output.innerHTML = html;
        }
    </script>
</body>
</html>
